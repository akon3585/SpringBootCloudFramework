/*!
 * Info:
 *       Bundle of h5WsPlayer
 *       Version: 1.0.0
 *       Generated: Mon Jun 24 2019 02:52:20 GMT+0800 (GMT+08:00)
 *       Author: zhangzq@pdstars.com
 *       Copyright: @ 2019 PDStars Electric Co., Ltd.
 *       License: ISC,
 *       
 *       Log:
 *       1.初始版本，适用于HTML5的RSTP直播视频播放器
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.h5WsPlayer=t():e.h5WsPlayer=t()}(window,function(){return function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./",o(o.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetURLParameter=t.H5sPlayerCreate=t.H5sAndriodPlatform=t.H5sSafariBrowser=t.H5sEdgeBrowser=t.H5sChromeBrowser=t.H5siOS=void 0;var i=o(1),n=i.wsPlayerHelper.H5siOS,s=i.wsPlayerHelper.H5sChromeBrowser,r=i.wsPlayerHelper.H5sEdgeBrowser,l=i.wsPlayerHelper.H5sSafariBrowser,c=i.wsPlayerHelper.H5sAndriodPlatform,a=i.wsPlayerHelper.H5sPlayerCreate,h=i.wsPlayerHelper.GetURLParameter;t.H5siOS=n,t.H5sChromeBrowser=s,t.H5sEdgeBrowser=r,t.H5sSafariBrowser=l,t.H5sAndriodPlatform=c,t.H5sPlayerCreate=a,t.GetURLParameter=h},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wsPlayerHelper=void 0;var i,n=o(2),s=o(6),r=(i=s)&&i.__esModule?i:{default:i};var l=o(7);function c(){var e=l.os.family;return!!/ios/i.test(e)}t.wsPlayerHelper={H5siOS:c,H5sChromeBrowser:function(){var e=l.name;return!!/chrome/i.test(e)},H5sEdgeBrowser:function(){var e=l.name;return!!/edge/i.test(e)},H5sSafariBrowser:function(){var e=l.name;return console.log(e),!!/safari/i.test(e)},H5sAndriodPlatform:function(){var e=l.os.family;return!!/android/i.test(e)},H5sPlayerCreate:function(e){return c()?new n.wsPlayer.H5sPlayerRTC(e):new r.default(e)},GetURLParameter:function(e){for(var t=window.location.search.substring(1).split("&"),o=0;o<t.length;o++){var i=t[o].split("=");if(i[0]==e)return i[1]}}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wsPlayer=void 0;var i,n=o(3),s=(i=n)&&i.__esModule?i:{default:i};function r(e){this.sourceBuffer,this.buffer=[],this.t,this.s,this.i,this.o,this.h,this.l=0,this.u=0,this.S=0,this.v=!1,this.p=!1,this.H=!1,this.C,this.k=e,console.log("Websocket Conf:",e),this.P=e.videoid,this.W=e.token,void 0===this.P?(this.R=e.videodom,console.log(e.token,"use dom directly")):(this.R=document.getElementById(this.P),console.log(e.token,"use videoid")),this.s=this.R;var t=this.k.protocol+"//"+this.k.host+this.k.rootpath+"api/v1/GetImage?token="+this.W+"&session="+this.k.session;this.R.setAttribute("poster",t)}function l(e){this.i,this.h,this.k=e,this.P=e.videoid,this.W=e.token,this.I,this.T=e.hlsver,void 0===this.P?(this.R=e.videodom,console.log(e.token,"use dom directly")):(this.R=document.getElementById(this.P),console.log(e.token,"use videoid")),this.m=this.R,this.m.type="application/x-mpegURL",this.M=0,this.O=0;var t=this.k.protocol+"//"+window.location.host+"/api/v1/GetImage?token="+this.W+"&session="+this.k.session;this.R.setAttribute("poster",t)}function c(e){this.i,this.o,this.h,this.l=0,this.u=0,this.S=0,this.v=!1,this.p=!1,this.k=e,this.P=e.videoid,this.W=e.token,void 0===this.P?(this.R=e.videodom,console.log(e.token,"use dom directly")):(this.R=document.getElementById(this.P),console.log(e.token,"use videoid")),this.s=this.R,this.J=null,this.N={optional:[{DtlsSrtpKeyAgreement:!0}]},this.g={mandatory:{offerToReceiveAudio:!0,offerToReceiveVideo:!0}},this.A={L:[]},this.B=[];var t=this.k.protocol+"//"+this.k.host+this.k.rootpath+"api/v1/GetImage?token="+this.W+"&session="+this.k.session;this.R.setAttribute("poster",t)}r.prototype.D=function(){console.log("Try Reconnect...",this.v),!0===this.v&&(console.log("Reconnect..."),this.G(this.W),this.v=!1),console.log("Try Reconnect...",this.v)},r.prototype.U=function(e){var t;console.log("H5SWebSocketClient");try{"http:"==this.k.protocol&&(t="undefined"!=typeof MozWebSocket?new MozWebSocket("ws://"+this.k.host+e):new WebSocket("ws://"+this.k.host+e)),"https:"==this.k.protocol&&(console.log(this.k.host),t="undefined"!=typeof MozWebSocket?new MozWebSocket("wss://"+this.k.host+e):new WebSocket("wss://"+this.k.host+e)),console.log(this.k.host)}catch(e){return void alert("error")}return t},r.prototype.K=function(){if(null!==this.sourceBuffer&&void 0!==this.sourceBuffer){if(0!==this.buffer.length&&!this.sourceBuffer.updating)try{var e=this.buffer.shift(),t=new Uint8Array(e);this.sourceBuffer.appendBuffer(t)}catch(e){console.log(e)}}else console.log(this.sourceBuffer,"is null or undefined")},r.prototype.V=function(){try{this.i.send("keepalive")}catch(e){console.log(e)}},r.prototype.j=function(e){if(!0!==this.p)return!1===this.H?(this.C=String.fromCharCode.apply(null,new Uint8Array(e.data)),this.q(this),void(this.H=!0)):(this.buffer.push(e.data),void this.K())},r.prototype.q=function(e){try{window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource||console.log("MediaSource API is not available");var t='video/mp4; codecs="avc1.42E01E, mp4a.40.2"';"MediaSource"in window&&MediaSource.isTypeSupported(t)?console.log("MIME type or codec: ",t):console.log("Unsupported MIME type or codec: ",t),e.t=new window.MediaSource,e.s.autoplay=!0,console.log(e.P),e.s.src=window.URL.createObjectURL(e.t),e.s.play(),e.t.addEventListener("sourceopen",e.F.bind(e),!1)}catch(e){console.log(e)}},r.prototype.F=function(){console.log("Add SourceBuffer"),this.sourceBuffer=this.t.addSourceBuffer(this.C),this.t.duration=1/0,this.t.removeEventListener("sourceopen",this.F,!1),this.sourceBuffer.addEventListener("updateend",this.K.bind(this),!1)},r.prototype.G=function(e){this.s.autoplay=!0;var t="api/v1/h5swsapi";t=this.k.rootpath+t+"?token="+e+"&session="+this.k.session,console.log(t),this.i=this.U(t),console.log("setupWebSocket",this.i),this.i.binaryType="arraybuffer",(this.i.X=this).i.onmessage=this.j.bind(this),this.i.onopen=function(){console.log("wsSocket.onopen",this.X),this.X.o=setInterval(this.X.Y.bind(this.X),1e4),this.X.h=setInterval(this.X.V.bind(this.X),1e3)},this.i.onclose=function(){console.log("wsSocket.onclose",this.X),!0===this.X.p?console.log("wsSocket.onclose disconnect"):this.X.v=!0,this.X.Z(this.X),this.X.$(this.X),this.X.C="",this.X.H=!1}},r.prototype.Z=function(e){console.log("Cleanup Source Buffer",e);try{e.sourceBuffer.removeEventListener("updateend",e.K,!1),e.sourceBuffer.abort(),document.documentMode||/Edge/.test(navigator.userAgent)?console.log("IE or EDGE!"):e.t.removeSourceBuffer(e.sourceBuffer),e.sourceBuffer=null,e.t=null,e.buffer=[]}catch(e){console.log(e)}},r.prototype.$=function(e){console.log("CleanupWebSocket",e),clearInterval(e.h),clearInterval(e.o),e.l=0,e.u=0,e.S=0},r.prototype.Y=function(){!0===this.p&&(console.log("CheckSourceBuffer has been disconnect",this),clearInterval(this.h),clearInterval(this.o),clearInterval(this._));try{if(console.log("CheckSourceBuffer",this),this.sourceBuffer.buffered.length<=0){if(this.l++,8<this.l)return console.log("CheckSourceBuffer Close 1"),void this.i.close()}else{this.l=0,this.sourceBuffer.buffered.start(0);var e=this.sourceBuffer.buffered.end(0),t=e-this.s.currentTime;if(5<t||t<0)return console.log("CheckSourceBuffer Close 2",t),void this.i.close();if(e==this.u){if(this.S++,3<this.S)return console.log("CheckSourceBuffer Close 3"),void this.i.close()}else this.S=0;this.u=e}}catch(e){console.log(e)}},r.prototype.connect=function(){this.G(this.W),this._=setInterval(this.D.bind(this),3e3)},r.prototype.disconnect=function(){console.log("disconnect",this),this.p=!0,clearInterval(this._),null!=this.i&&(this.i.close(),this.i=null),console.log("disconnect",this)},l.prototype.U=function(e){var t;console.log("H5SWebSocketClient");try{"http:"==this.k.protocol&&(t="undefined"!=typeof MozWebSocket?new MozWebSocket("ws://"+this.k.host+e):new WebSocket("ws://"+this.k.host+e)),"https:"==this.k.protocol&&(console.log(this.k.host),t="undefined"!=typeof MozWebSocket?new MozWebSocket("wss://"+this.k.host+e):new WebSocket("wss://"+this.k.host+e)),console.log(this.k.host)}catch(e){return void alert("error")}return t},l.prototype.V=function(){try{var e={type:"keepalive"};this.i.send((0,s.default)({type:"keepalive"}))}catch(e){console.log(e)}},l.prototype.j=function(e){console.log("HLS received ",e.data)},l.prototype.G=function(e){var t="api/v1/h5swscmnapi";t=this.k.rootpath+t+"?token="+e,console.log(t),this.i=this.U(t),console.log("setupWebSocket",this.i),this.i.binaryType="arraybuffer",(this.i.X=this).i.onmessage=this.j.bind(this),this.i.onopen=function(){console.log("wsSocket.onopen",this.X),this.X.h=setInterval(this.X.V.bind(this.X),1e3)},this.i.onclose=function(){console.log("wsSocket.onclose",this.X),this.X.$(this.X)}},l.prototype.$=function(e){console.log("H5sPlayerHls CleanupWebSocket",e),clearInterval(e.h)},l.prototype.tt=function(){console.log("HLS video.ended",this.m.ended),console.log("HLS video.currentTime",this.m.currentTime);var e=this.m.currentTime,t=e-this.M;console.log("HLS diff",t),0===t&&this.O++,this.M=e,3<this.O&&(null!=this.i&&(this.i.close(),this.i=null),this.G(this.W),console.log("HLS reconnect"),this.m.src="",this.M=0,this.O=0,this.m.src=this.k.protocol+"//"+this.k.host+this.k.rootpath+"hls/"+this.T+"/"+this.W+"/hls.m3u8",this.m.play())},l.prototype.connect=function(){this.G(this.W),this.M=0,this.O=0,this.m.onended=function(e){console.log("The End")},this.m.onpause=function(e){console.log("Pause")},this.m.onplaying=function(e){console.log("Playing")},this.m.onseeking=function(e){console.log("seeking")},this.m.onvolumechange=function(e){console.log("volumechange")},this.m.src=this.k.protocol+"//"+this.k.host+this.k.rootpath+"hls/"+this.T+"/"+this.W+"/hls.m3u8",this.m.play(),this.I=setInterval(this.tt.bind(this),3e3)},l.prototype.disconnect=function(){clearInterval(this.I),this.M=0,this.O=0,null!=this.i&&(this.i.close(),this.i=null),console.log("disconnect",this)},c.prototype.D=function(){console.log("Try Reconnect...",this.v),!0===this.v&&(console.log("Reconnect..."),this.G(this.W),this.v=!1),console.log("Try Reconnect...",this.v)},c.prototype.U=function(e){var t;console.log("H5SWebSocketClient");try{"http:"==this.k.protocol&&(t="undefined"!=typeof MozWebSocket?new MozWebSocket("ws://"+this.k.host+e):new WebSocket("ws://"+this.k.host+e)),"https:"==this.k.protocol&&(console.log(this.k.host),t="undefined"!=typeof MozWebSocket?new MozWebSocket("wss://"+this.k.host+e):new WebSocket("wss://"+this.k.host+e)),console.log(this.k.host)}catch(e){return void alert("error")}return t},c.prototype.V=function(){try{var e={type:"keepalive"};this.i.send((0,s.default)({type:"keepalive"}))}catch(e){console.log(e)}},c.prototype.st=function(e){if(e.candidate){var t;console.log("onIceCandidate currentice",e.candidate),t=e.candidate,console.log("onIceCandidate currentice",t,(0,s.default)(t));var o=JSON.parse((0,s.default)(t));o.type="remoteice",console.log("onIceCandidate currentice new",o,(0,s.default)(o)),this.i.send((0,s.default)(o))}else console.log("End of candidates.")},c.prototype.et=function(e){var t;console.log("Remote track added:"+(0,s.default)(e)),t=e.it?e.it[0]:e.stream;var o=this.R;o.src=URL.createObjectURL(t),o.play()},c.prototype.ot=function(){console.log("createPeerConnection  config: "+(0,s.default)(this.A)+" option:"+(0,s.default)(this.N));var e=new RTCPeerConnection(this.A,this.N),t=this;return e.onicecandidate=function(e){t.st.call(t,e)},void 0!==e.nt?e.nt=function(e){t.et.call(t,e)}:e.onaddstream=function(e){t.et.call(t,e)},e.oniceconnectionstatechange=function(t){console.log("oniceconnectionstatechange  state: "+e.iceConnectionState)},console.log("Created RTCPeerConnnection with config: "+(0,s.default)(this.A)+"option:"+(0,s.default)(this.N)),e},c.prototype.ht=function(e){console.log("ProcessRTCOffer",e);try{this.J=this.ot(),this.B.length=0;var t=this;this.J.setRemoteDescription(function(e){return console.log("createRTCSessionDescription "),new RTCSessionDescription(e)}(e)),this.J.createAnswer(this.g).then(function(e){console.log("Create answer:"+(0,s.default)(e)),t.J.setLocalDescription(e,function(){console.log("ProcessRTCOffer createAnswer",e),t.i.send((0,s.default)(e))},function(){})},function(e){alert("Create awnser error:"+(0,s.default)(e))})}catch(e){this.disconnect(),alert("connect error: "+e)}},c.prototype.ct=function(e){console.log("ProcessRemoteIce",e);try{var t=new RTCIceCandidate({sdpMLineIndex:e.sdpMLineIndex,candidate:e.candidate});console.log("ProcessRemoteIce",t),console.log("Adding ICE candidate :"+(0,s.default)(t)),this.J.addIceCandidate(t,function(){console.log("addIceCandidate OK")},function(e){console.log("addIceCandidate error:"+(0,s.default)(e))})}catch(e){alert("connect ProcessRemoteIce error: "+e)}},c.prototype.j=function(e){console.log("RTC received ",e.data);var t=JSON.parse(e.data);console.log("Get Message type ",t.type),"offer"===t.type&&(console.log("Process Message type ",t.type),this.ht(t)),"remoteice"===t.type&&(console.log("Process Message type ",t.type),this.ct(t))},c.prototype.G=function(e){this.s.autoplay=!0;var t="api/v1/h5srtcapi";t=this.k.rootpath+t+"?token="+e,console.log(t),this.i=this.U(t),console.log("setupWebSocket",this.i),this.i.binaryType="arraybuffer",(this.i.X=this).i.onmessage=this.j.bind(this),this.i.onopen=function(){console.log("wsSocket.onopen",this.X);this.X.i.send((0,s.default)({type:"open"})),this.X.h=setInterval(this.X.V.bind(this.X),1e3)},this.i.onclose=function(){console.log("wsSocket.onclose",this.X),!0===this.X.p?console.log("wsSocket.onclose disconnect"):this.X.v=!0,this.X.$(this.X)}},c.prototype.$=function(e){console.log("CleanupWebSocket",e),clearInterval(e.h),e.l=0,e.u=0,e.S=0},c.prototype.connect=function(){this.G(this.W),this._=setInterval(this.D.bind(this),3e3)},c.prototype.disconnect=function(){console.log("disconnect",this),this.p=!0,clearInterval(this._),null!=this.i&&(this.i.close(),this.i=null),console.log("disconnect",this)};t.wsPlayer={H5sPlayerHls:l,H5sPlayerRTC:c}},function(e,t,o){e.exports={default:o(4),__esModule:!0}},function(e,t,o){var i=o(5),n=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return n.stringify.apply(n,arguments)}},function(e,t){var o=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=o)},function(e,t,o){"use strict";function i(e){this.sourceBuffer,this.buffer=[],this.t,this.s,this.i,this.o,this.h,this.l=0,this.u=0,this.S=0,this.v=!1,this.p=!1,this.H=!1,this.C,this.k=e,console.log("Websocket Conf:",e),this.P=e.videoid,this.W=e.token,void 0===this.P?(this.R=e.videodom,console.log(e.token,"use dom directly")):(this.R=document.getElementById(this.P),console.log(e.token,"use videoid")),this.s=this.R;var t=this.k.protocol+"//"+this.k.host+this.k.rootpath+"api/v1/GetImage?token="+this.W+"&session="+this.k.session;this.R.setAttribute("poster",t)}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype.D=function(){console.log("Try Reconnect...",this.v),!0===this.v&&(console.log("Reconnect..."),this.G(this.W),this.v=!1),console.log("Try Reconnect...",this.v)},i.prototype.U=function(e){var t;console.log("H5SWebSocketClient");try{"http:"==this.k.protocol&&(t="undefined"!=typeof MozWebSocket?new MozWebSocket("ws://"+this.k.host+e):new WebSocket("ws://"+this.k.host+e)),"https:"==this.k.protocol&&(console.log(this.k.host),t="undefined"!=typeof MozWebSocket?new MozWebSocket("wss://"+this.k.host+e):new WebSocket("wss://"+this.k.host+e)),console.log(this.k.host)}catch(e){return void alert("error")}return t},i.prototype.K=function(){if(null!==this.sourceBuffer&&void 0!==this.sourceBuffer){if(0!==this.buffer.length&&!this.sourceBuffer.updating)try{var e=this.buffer.shift(),t=new Uint8Array(e);this.sourceBuffer.appendBuffer(t)}catch(e){console.log(e)}}else console.log(this.sourceBuffer,"is null or undefined")},i.prototype.V=function(){try{this.i.send("keepalive")}catch(e){console.log(e)}},i.prototype.j=function(e){if(!0!==this.p)return!1===this.H?(this.C=String.fromCharCode.apply(null,new Uint8Array(e.data)),this.q(this),void(this.H=!0)):(this.buffer.push(e.data),void this.K())},i.prototype.q=function(e){try{window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource||console.log("MediaSource API is not available");var t='video/mp4; codecs="avc1.42E01E, mp4a.40.2"';"MediaSource"in window&&MediaSource.isTypeSupported(t)?console.log("MIME type or codec: ",t):console.log("Unsupported MIME type or codec: ",t),e.t=new window.MediaSource,e.s.autoplay=!0,console.log(e.P),e.s.src=window.URL.createObjectURL(e.t),e.s.play(),e.t.addEventListener("sourceopen",e.F.bind(e),!1)}catch(e){console.log(e)}},i.prototype.F=function(){console.log("Add SourceBuffer"),this.sourceBuffer=this.t.addSourceBuffer(this.C),this.t.duration=1/0,this.t.removeEventListener("sourceopen",this.F,!1),this.sourceBuffer.addEventListener("updateend",this.K.bind(this),!1)},i.prototype.G=function(e){this.s.autoplay=!0;var t="api/v1/h5swsapi";t=this.k.rootpath+t+"?token="+e+"&session="+this.k.session,console.log(t),this.i=this.U(t),console.log("setupWebSocket",this.i),this.i.binaryType="arraybuffer",(this.i.X=this).i.onmessage=this.j.bind(this),this.i.onopen=function(){console.log("wsSocket.onopen",this.X),this.X.o=setInterval(this.X.Y.bind(this.X),1e4),this.X.h=setInterval(this.X.V.bind(this.X),1e3)},this.i.onclose=function(){console.log("wsSocket.onclose",this.X),!0===this.X.p?console.log("wsSocket.onclose disconnect"):this.X.v=!0,this.X.Z(this.X),this.X.$(this.X),this.X.C="",this.X.H=!1}},i.prototype.Z=function(e){console.log("Cleanup Source Buffer",e);try{e.sourceBuffer.removeEventListener("updateend",e.K,!1),e.sourceBuffer.abort(),document.documentMode||/Edge/.test(navigator.userAgent)?console.log("IE or EDGE!"):e.t.removeSourceBuffer(e.sourceBuffer),e.sourceBuffer=null,e.t=null,e.buffer=[]}catch(e){console.log(e)}},i.prototype.$=function(e){console.log("CleanupWebSocket",e),clearInterval(e.h),clearInterval(e.o),e.l=0,e.u=0,e.S=0},i.prototype.Y=function(){!0===this.p&&(console.log("CheckSourceBuffer has been disconnect",this),clearInterval(this.h),clearInterval(this.o),clearInterval(this._));try{if(console.log("CheckSourceBuffer",this),this.sourceBuffer.buffered.length<=0){if(this.l++,8<this.l)return console.log("CheckSourceBuffer Close 1"),void this.i.close()}else{this.l=0,this.sourceBuffer.buffered.start(0);var e=this.sourceBuffer.buffered.end(0),t=e-this.s.currentTime;if(5<t||t<0)return console.log("CheckSourceBuffer Close 2",t),void this.i.close();if(e==this.u){if(this.S++,3<this.S)return console.log("CheckSourceBuffer Close 3"),void this.i.close()}else this.S=0;this.u=e}}catch(e){console.log(e)}},i.prototype.connect=function(){this.G(this.W),this._=setInterval(this.D.bind(this),3e3)},i.prototype.disconnect=function(){console.log("disconnect",this),this.p=!0,clearInterval(this._),null!=this.i&&(this.i.close(),this.i=null),console.log("disconnect",this)},t.default=i},function(e,t,o){(function(e,i){var n;
/*!
 * Platform.js <https://mths.be/platform>
 * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <https://mths.be/mit>
 */(function(){"use strict";var s={function:!0,object:!0},r=s[typeof window]&&window||this,l=s[typeof t]&&t,c=s[typeof e]&&e&&!e.nodeType&&e,a=l&&c&&"object"==typeof i&&i;!a||a.global!==a&&a.window!==a&&a.self!==a||(r=a);var h=Math.pow(2,53)-1,u=/\bOpera/,d=Object.prototype,p=d.hasOwnProperty,f=d.toString;function b(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function g(e){return e=k(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:b(e)}function y(e,t){for(var o in e)p.call(e,o)&&t(e[o],o,e)}function S(e){return null==e?b(e):f.call(e).slice(8,-1)}function v(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function m(e,t){var o=null;return function(e,t){var o=-1,i=e?e.length:0;if("number"==typeof i&&i>-1&&i<=h)for(;++o<i;)t(e[o],o,e);else y(e,t)}(e,function(i,n){o=t(o,i,n,e)}),o}function k(e){return String(e).replace(/^ +| +$/g,"")}var w=function e(t){var o=r,i=t&&"object"==typeof t&&"String"!=S(t);i&&(o=t,t=null);var n=o.navigator||{},s=n.userAgent||"";t||(t=s);var l,c,a,h,d,p=i?!!n.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(f.toString()),b=i?"Object":"ScriptBridgingProxyObject",w=i?"Object":"Environment",x=i&&o.java?"JavaPackage":S(o.java),M=i?"Object":"RuntimeObject",P=/\bJava/.test(x)&&o.java,C=P&&S(o.environment)==w,O=P?"a":"α",B=P?"b":"β",W=o.document||{},I=o.operamini||o.opera,E=u.test(E=i&&I?I["[[Class]]"]:S(I))?E:I=null,R=t,X=[],T=null,H=t==s,A=H&&I&&"function"==typeof I.version&&I.version(),G=m([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,o){return e||RegExp("\\b"+(o.pattern||v(o))+"\\b","i").exec(t)&&(o.label||o)}),j=function(e){return m(e,function(e,o){return e||RegExp("\\b"+(o.pattern||v(o))+"\\b","i").exec(t)&&(o.label||o)})}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),_=$([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),F=function(e){return m(e,function(e,o,i){return e||(o[_]||o[/^[a-z]+(?: +[a-z]+\b)*/i.exec(_)]||RegExp("\\b"+v(i)+"(?:\\b|\\w*\\d)","i").exec(t))&&i})}({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}}),L=function(e){return m(e,function(e,o){var i=o.pattern||v(o);return!e&&(e=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,o){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&o&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(i=i[/[\d.]+$/.exec(e)])&&(e="Windows "+i),e=String(e),t&&o&&(e=e.replace(RegExp(t,"i"),o)),e=g(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,i,o.label||o)),e})}(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function $(e){return m(e,function(e,o){var i=o.pattern||v(o);return!e&&(e=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+i+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(o.label&&!RegExp(i,"i").test(o.label)?o.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),o=o.label||o,e=g(e[0].replace(RegExp(i,"i"),o).replace(RegExp("; *(?:"+o+"[_-])?","i")," ").replace(RegExp("("+o+")[-_.]?(\\w)","i"),"$1 $2"))),e})}if(G&&(G=[G]),F&&!_&&(_=$([F])),(l=/\bGoogle TV\b/.exec(_))&&(_=l[0]),/\bSimulator\b/i.test(t)&&(_=(_?_+" ":"")+"Simulator"),"Opera Mini"==j&&/\bOPiOS\b/.test(t)&&X.push("running in Turbo/Uncompressed mode"),"IE"==j&&/\blike iPhone OS\b/.test(t)?(F=(l=e(t.replace(/like iPhone OS/,""))).manufacturer,_=l.product):/^iP/.test(_)?(j||(j="Safari"),L="iOS"+((l=/ OS ([\d_]+)/i.exec(t))?" "+l[1].replace(/_/g,"."):"")):"Konqueror"!=j||/buntu/i.test(L)?F&&"Google"!=F&&(/Chrome/.test(j)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(_))||/\bAndroid\b/.test(L)&&/^Chrome/.test(j)&&/\bVersion\//i.test(t)?(j="Android Browser",L=/\bAndroid\b/.test(L)?L:"Android"):"Silk"==j?(/\bMobi/i.test(t)||(L="Android",X.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&X.unshift("accelerated")):"PaleMoon"==j&&(l=/\bFirefox\/([\d.]+)\b/.exec(t))?X.push("identifying as Firefox "+l[1]):"Firefox"==j&&(l=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(L||(L="Firefox OS"),_||(_=l[1])):!j||(l=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(j))?(j&&!_&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(l+"/")+8))&&(j=null),(l=_||F||L)&&(_||F||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(L))&&(j=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(L)?L:l)+" Browser")):"Electron"==j&&(l=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&X.push("Chromium "+l):L="Kubuntu",A||(A=m(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",v(j),"(?:Firefox|Minefield|NetFront)"],function(e,o){return e||(RegExp(o+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})),(l=("iCab"==G&&parseFloat(A)>3?"WebKit":/\bOpera\b/.test(j)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(G)&&"WebKit"||!G&&/\bMSIE\b/i.test(t)&&("Mac OS"==L?"Tasman":"Trident")||"WebKit"==G&&/\bPlayStation\b(?! Vita\b)/i.test(j)&&"NetFront")&&(G=[l]),"IE"==j&&(l=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(j+=" Mobile",L="Windows Phone "+(/\+$/.test(l)?l:l+".x"),X.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(j="IE Mobile",L="Windows Phone 8.x",X.unshift("desktop mode"),A||(A=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=j&&"Trident"==G&&(l=/\brv:([\d.]+)/.exec(t))&&(j&&X.push("identifying as "+j+(A?" "+A:"")),j="IE",A=l[1]),H){if(h="global",d=null!=(a=o)?typeof a[h]:"number",/^(?:boolean|number|string|undefined)$/.test(d)||"object"==d&&!a[h])S(l=o.runtime)==b?(j="Adobe AIR",L=l.flash.system.Capabilities.os):S(l=o.phantom)==M?(j="PhantomJS",A=(l=l.version||null)&&l.major+"."+l.minor+"."+l.patch):"number"==typeof W.documentMode&&(l=/\bTrident\/(\d+)/i.exec(t))?(A=[A,W.documentMode],(l=+l[1]+4)!=A[1]&&(X.push("IE "+A[1]+" mode"),G&&(G[1]=""),A[1]=l),A="IE"==j?String(A[1].toFixed(1)):A[0]):"number"==typeof W.documentMode&&/^(?:Chrome|Firefox)\b/.test(j)&&(X.push("masking as "+j+" "+A),j="IE",A="11.0",G=["Trident"],L="Windows");else if(P&&(R=(l=P.lang.System).getProperty("os.arch"),L=L||l.getProperty("os.name")+" "+l.getProperty("os.version")),C){try{A=o.require("ringo/engine").version.join("."),j="RingoJS"}catch(e){(l=o.system)&&l.global.system==o.system&&(j="Narwhal",L||(L=l[0].os||null))}j||(j="Rhino")}else"object"==typeof o.process&&!o.process.browser&&(l=o.process)&&("object"==typeof l.versions&&("string"==typeof l.versions.electron?(X.push("Node "+l.versions.node),j="Electron",A=l.versions.electron):"string"==typeof l.versions.nw&&(X.push("Chromium "+A,"Node "+l.versions.node),j="NW.js",A=l.versions.nw)),j||(j="Node.js",R=l.arch,L=l.platform,A=(A=/[\d.]+/.exec(l.version))?A[0]:null));L=L&&g(L)}if(A&&(l=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(A)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(H&&n.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(T=/b/i.test(l)?"beta":"alpha",A=A.replace(RegExp(l+"\\+?$"),"")+("beta"==T?B:O)+(/\d+\+?/.exec(l)||"")),"Fennec"==j||"Firefox"==j&&/\b(?:Android|Firefox OS)\b/.test(L))j="Firefox Mobile";else if("Maxthon"==j&&A)A=A.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(_))"Xbox 360"==_&&(L=null),"Xbox 360"==_&&/\bIEMobile\b/.test(t)&&X.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(j)&&(!j||_||/Browser|Mobi/.test(j))||"Windows CE"!=L&&!/Mobi/i.test(t))if("IE"==j&&H)try{null===o.external&&X.unshift("platform preview")}catch(e){X.unshift("embedded")}else(/\bBlackBerry\b/.test(_)||/\bBB10\b/.test(t))&&(l=(RegExp(_.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||A)?(L=((l=[l,/BB10/.test(t)])[1]?(_=null,F="BlackBerry"):"Device Software")+" "+l[0],A=null):this!=y&&"Wii"!=_&&(H&&I||/Opera/.test(j)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==j&&/\bOS X (?:\d+\.){2,}/.test(L)||"IE"==j&&(L&&!/^Win/.test(L)&&A>5.5||/\bWindows XP\b/.test(L)&&A>8||8==A&&!/\bTrident\b/.test(t)))&&!u.test(l=e.call(y,t.replace(u,"")+";"))&&l.name&&(l="ing as "+l.name+((l=l.version)?" "+l:""),u.test(j)?(/\bIE\b/.test(l)&&"Mac OS"==L&&(L=null),l="identify"+l):(l="mask"+l,j=E?g(E.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(l)&&(L=null),H||(A=null)),G=["Presto"],X.push(l));else j+=" Mobile";(l=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(l=[parseFloat(l.replace(/\.(\d)$/,".0$1")),l],"Safari"==j&&"+"==l[1].slice(-1)?(j="WebKit Nightly",T="alpha",A=l[1].slice(0,-1)):A!=l[1]&&A!=(l[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(A=null),l[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==l[0]&&537.36==l[2]&&parseFloat(l[1])>=28&&"WebKit"==G&&(G=["Blink"]),H&&(p||l[1])?(G&&(G[1]="like Chrome"),l=l[1]||((l=l[0])<530?1:l<532?2:l<532.05?3:l<533?4:l<534.03?5:l<534.07?6:l<534.1?7:l<534.13?8:l<534.16?9:l<534.24?10:l<534.3?11:l<535.01?12:l<535.02?"13+":l<535.07?15:l<535.11?16:l<535.19?17:l<536.05?18:l<536.1?19:l<537.01?20:l<537.11?"21+":l<537.13?23:l<537.18?24:l<537.24?25:l<537.36?26:"Blink"!=G?"27":"28")):(G&&(G[1]="like Safari"),l=(l=l[0])<400?1:l<500?2:l<526?3:l<533?4:l<534?"4+":l<535?5:l<537?6:l<538?7:l<601?8:"8"),G&&(G[1]+=" "+(l+="number"==typeof l?".x":/[.+]/.test(l)?"":"+")),"Safari"==j&&(!A||parseInt(A)>45)&&(A=l)),"Opera"==j&&(l=/\bzbov|zvav$/.exec(L))?(j+=" ",X.unshift("desktop mode"),"zvav"==l?(j+="Mini",A=null):j+="Mobile",L=L.replace(RegExp(" *"+l+"$"),"")):"Safari"==j&&/\bChrome\b/.exec(G&&G[1])&&(X.unshift("desktop mode"),j="Chrome Mobile",A=null,/\bOS X\b/.test(L)?(F="Apple",L="iOS 4.3+"):L=null),A&&0==A.indexOf(l=/[\d.]+$/.exec(L))&&t.indexOf("/"+l+"-")>-1&&(L=k(L.replace(l,""))),G&&!/\b(?:Avant|Nook)\b/.test(j)&&(/Browser|Lunascape|Maxthon/.test(j)||"Safari"!=j&&/^iOS/.test(L)&&/\bSafari\b/.test(G[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(j)&&G[1])&&(l=G[G.length-1])&&X.push(l),X.length&&(X=["("+X.join("; ")+")"]),F&&_&&_.indexOf(F)<0&&X.push("on "+F),_&&X.push((/^on /.test(X[X.length-1])?"":"on ")+_),L&&(l=/ ([\d.+]+)$/.exec(L),c=l&&"/"==L.charAt(L.length-l[0].length-1),L={architecture:32,family:l&&!c?L.replace(l[0],""):L,version:l?l[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(l=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(L&&(L.architecture=64,L.family=L.family.replace(RegExp(" *"+l),"")),j&&(/\bWOW64\b/i.test(t)||H&&/\w(?:86|32)$/.test(n.cpuClass||n.platform)&&!/\bWin64; x64\b/i.test(t))&&X.unshift("32-bit")):L&&/^OS X/.test(L.family)&&"Chrome"==j&&parseFloat(A)>=39&&(L.architecture=64),t||(t=null);var U={};return U.description=t,U.layout=G&&G[0],U.manufacturer=F,U.name=j,U.prerelease=T,U.product=_,U.ua=t,U.version=j&&A,U.os=L||{architecture:null,family:null,version:null,toString:function(){return"null"}},U.parse=e,U.toString=function(){return this.description||""},U.version&&X.unshift(A),U.name&&X.unshift(j),L&&j&&(L!=String(L).split(" ")[0]||L!=j.split(" ")[0]&&!_)&&X.push(_?"("+L+")":"on "+L),X.length&&(U.description=X.join(" ")),U}();r.platform=w,void 0===(n=function(){return w}.call(t,o,t,e))||(e.exports=n)}).call(this)}).call(this,o(8)(e),o(9))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(e){"object"==typeof window&&(o=window)}e.exports=o}])});